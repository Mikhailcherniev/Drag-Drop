"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[32754],{32754:function(e,t,n){n.d(t,{VL:function(){return ee}});var i,o=n(87394),s=n(52322),r=n(94340),a=n(33301),l=n(52227),c=n(44297),d="add_to_collection_asset",u="add_to_collection_grid_items",p=function(e){var t=e.assets,n=e.gridItems,i=e.signUpPath;window&&(t&&window.sessionStorage.setItem(d,JSON.stringify(t)),n&&window.sessionStorage.setItem(u,JSON.stringify(n)),window.location=i)},f=function(e){var t=e.showAddToCollectionModal,n=e.isLoggedInUser;if(void 0!==n){if(n){var i=window.sessionStorage.getItem(d),o=window.sessionStorage.getItem(u),s=function(e){return e&&"undefined"!==e};if(s(i)&&s(o)){var r=JSON.parse(i),a=JSON.parse(o),l=[].concat(r);t({formattedAssets:l,gridItems:a,mappedAssetType:(0,c.A8)(l[0]),isCopyToCollection:!1,redirectToCollectionDetailsPage:!1})}}window.sessionStorage.removeItem(d),window.sessionStorage.removeItem(u)}},g=n(59979),m=n(47875),v=n(9823),C=n(52309),S=n(94909),T=n(98788),h=n(47842),I=n(70865),y=n(5163),A=n(81740),w=n(44699),b=n(8149),P=n(32456),O=n(7297),k=n(29292),Z=n(86795),_=n(15111),M=n(18027),D=n(12787),x=n(776),U=n(49670),E=n(9009),N=n(2784),R=n(3255),B=n(52494),J=function(e){var t=e.queryParams;return(0,A.nS)({queryParams:t}).formattedUrl},j=function(e){var t=e.assetId,n=e.asset,i=n.id,o=n.tier,s=n.src,r=n.aspect,a=n.width,l=n.height;return{metadata:{notes:{media_id:t,alpha_num_id:i,rex_id:i,media_type:b.gP,tier:void 0===o?10:o,media:{aspect:r,width:a,height:l,url:s}}}}},L=(i=(0,T.Z)(function(e){var t,n,i,o,s,r,a,l,d,u,p,f,g;return(0,y.__generator)(this,function(m){switch(m.label){case 0:if(t=e.isRexEditorial,n=e.collectionId,i=e.verificationCode,o=e.setAsCover,s=e.firstAsset,r=e.collectionType,(l=(0,c.A8)(s))!==b.VT)return[2];return d={id:n,verificationCode:i,collectionType:r},u=(0,A.Yz)({queryParams:d}).formattedUrl,[4,U.uS.get(u).then(function(e){return(0,E.O)(e.data)||{}})];case 1:if(null==(p=m.sent())?void 0:null===(a=p.coverItem)||void 0===a?void 0:a.id)return[3,3];return f=(0,c.OP)({asset:s,isRexEditorial:t}),g=(0,Z.Q)({collectionId:n,mappedAssetType:l,assetId:f}),[4,o({collection:{id:n},mediaItem:{id:g}})];case 2:m.sent(),m.label=3;case 3:return[2]}})}),function(e){return i.apply(this,arguments)}),V=function(){var e,t=(0,o.Z)((0,N.useState)({status:"",error:void 0}),2),n=t[0],i=t[1],s=(0,o.Z)((0,N.useState)(""),2),r=s[0],a=s[1],l=(0,o.Z)((0,N.useState)(""),2),d=l[0],u=l[1],p=(0,D.J)(),f=(0,B.w)().setAsCover,g=(0,v.D)().isBrandSstk,m=(0,x.yh)().analytics,C=(0,k.UM)(m),S=(0,R.kY)().mutate;return{add:(0,N.useCallback)((e=(0,T.Z)(function(e){var t,n,o,s,r,l,d,m,v,T,k,D,x,E,N,R,B,V,q,G,H,Y,Q;return(0,y.__generator)(this,function(y){switch(y.label){case 0:t=e.assets,n=e.assetType,o=e.gridItems,s=e.groupedOptions,r=e.id,l=e.title,d=e.verificationCode,m=e.pageSection,v=e.listId,T=(0,_.wZ)({assetType:n,isBrandSstk:g}),y.label=1;case 1:if(y.trys.push([1,6,7,9]),i({status:w.MR,error:void 0}),k=(0,c.Xo)(n),D=r,x=d,s&&s.length&&(E=s.find(function(e){return e.title===l}))&&(D=E.id,x=E.verificationCode),D)return[3,3];return N=(0,A.A6)().formattedUrl,R={data:{attributes:{title:l,collectionType:T,isPublic:!1},type:P.Ul}},[4,U.uS.post(N,R)];case 2:V=(B=y.sent().data).id,q=B.attributes.verificationCode,D=V,x=q,y.label=3;case 3:return G={data:t.map(function(e){var t=(0,c.OP)({asset:e,isRexEditorial:k}),n=(0,c.A8)(e);return(0,I.Z)({type:P.A8,id:(0,Z.Q)({collectionId:D,mappedAssetType:n,assetId:t})},n===b.VT&&j({assetId:t,asset:e}))})},H=(0,A.mp)({urlParams:{id:D},queryParams:{isRexEditorial:k}}).formattedUrl,Y=(0,M.y)(C),[4,U.uS.post(H,G,Y?{headers:(0,h.Z)({},O.as,Y)}:void 0)];case 4:return y.sent(),[4,L({isRexEditorial:k,collectionId:D,verificationCode:x,setAsCover:f,firstAsset:t[0],collectionType:T})];case 5:return y.sent(),p({collectionId:D,collectionName:l,gridItems:o,assets:t,pageSection:m,listId:v}),a(D),u(x),[3,9];case 6:return Q=y.sent(),i({status:w.cM,error:Q}),[3,9];case 7:return[4,S(J({queryParams:{"filter[type]":T}}))];case 8:return y.sent(),[7];case 9:return[2]}})}),function(t){return e.apply(this,arguments)}),[g,C,f,p,S]),collectionId:r,setStatus:i,status:n,verificationCode:d}},q=n(12649),G=n(92405),H=n(25237),Y=n.n(H),Q=n(26297),z=Y()(function(){return Promise.all([n.e(27310),n.e(81503),n.e(24980),n.e(23883),n.e(76412),n.e(24394),n.e(28903),n.e(88249),n.e(75520),n.e(79103),n.e(79637),n.e(67790),n.e(17052)]).then(n.bind(n,92805)).then(function(e){return e.CollectionModal})},{loadableGenerated:{webpack:function(){return[92805]}},ssr:!1}),F=function(e){var t=e.isOpen,n=(0,Q.Z)(e,["isOpen"]);return(0,C.B)(t)&&(0,s.jsx)(z,(0,I.Z)({isOpen:t},n))},W=Y()(function(){return Promise.all([n.e(27310),n.e(81503),n.e(24980),n.e(23883),n.e(76412),n.e(24394),n.e(78273),n.e(28903),n.e(45596),n.e(4196),n.e(62639),n.e(14727),n.e(82535),n.e(30502),n.e(25551),n.e(53173)]).then(n.bind(n,53173)).then(function(e){return e.ExperimentUTLZ269})},{loadableGenerated:{webpack:function(){return[53173]}},ssr:!1}),X=Y()(function(){return Promise.all([n.e(27310),n.e(81503),n.e(24980),n.e(23883),n.e(76412),n.e(24394),n.e(78273),n.e(28903),n.e(45596),n.e(4196),n.e(62639),n.e(14727),n.e(82535),n.e(30502),n.e(25551),n.e(53538)]).then(n.bind(n,53538)).then(function(e){return e.SaveSnackbarOrModal})},{loadableGenerated:{webpack:function(){return[53538]}},ssr:!1}),K=Y()(function(){return n.e(8880).then(n.bind(n,8880)).then(function(e){return e.Snackbar})},{loadableGenerated:{webpack:function(){return[8880]}},ssr:!1}),$=function(e){var t=e.assets,n=e.assetType,i=e.collectionId,o=e.collectionTitle,r=e.gridItems,l=e.isDialogActive,c=e.isSnackBarOpen,d=e.onAddToCollections,u=e.onAlertSnackbarClose,p=e.onAddToCollectionsComplete,f=e.redirectToCDPAction,g=e.setIsDialogActive,m=e.showCopyToModalTitle,S=e.status,T=e.verificationCode,h=e.pageSection,I=(0,v.D)().isBrandSstk,y=(0,G.p)(a.vb),A=(0,G.p)(a.pG),w=(0,C.B)(t),b=(0,N.useCallback)(function(){return g(!1)},[g]);return w?y||A&&l?I?(0,s.jsx)(W,{onClose:b,isOpen:l,items:t,onAddToCollectionsComplete:p,pageSection:h}):(0,s.jsx)(X,{onClose:b,isOpen:l,items:t,onAddToCollectionsComplete:p,pageSection:h}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(F,{assets:t,assetType:n,collectionId:i,gridItems:r,isOpen:l,onAddToCollections:d,setIsDialogActive:g,showCopyToModalTitle:m,pageSection:h}),(0,s.jsx)(K,{assetType:n,collectionId:i,collectionTitle:o,isOpen:c,onAlertSnackbarClose:u,redirectToCDPAction:f,status:S,verificationCode:T})]}):null};$.defaultProps={assetType:"",assets:null,gridItems:null,onAddToCollectionsComplete:void 0,redirectToCDPAction:{}};var ee=function(e){var t=e.initialAssetType,n=(0,o.Z)((0,N.useState)(!1),2),i=n[0],s=n[1],a=(0,o.Z)((0,N.useState)(!1),2),v=a[0],C=a[1],T=(0,o.Z)((0,N.useState)(!1),2),h=T[0],I=T[1],y=(0,o.Z)((0,N.useState)(""),2),A=y[0],w=y[1],b=(0,o.Z)((0,N.useState)(null),2),P=b[0],O=b[1],k=(0,o.Z)((0,N.useState)(t),2),Z=k[0],_=k[1],M=(0,o.Z)((0,N.useState)(null),2),D=M[0],x=M[1],U=(0,o.Z)((0,N.useState)(null),2),E=U[0],R=U[1],B=(0,o.Z)((0,N.useState)(null),2),J=B[0],j=B[1],L=(0,q.B)(),G=(0,g.cM)(),H=(0,m.L)(),Y=(0,S.d)(),Q=(0,r.o)(),z=Q.isModalOpen,F=Q.handleCloseModal,W=Q.handleOpenModal,X=(0,o.Z)((0,N.useState)({shouldHandleRedirect:!1,redirectToCollectionDetailsPage:H}),2),K=X[0],ee=X[1],et=V(),en=et.add,ei=et.status,eo=et.collectionId,es=et.verificationCode,er=(0,l.c)().setIsSaveInProgress;(0,N.useEffect)(function(){return function(){return O(null)}},[]),(0,N.useEffect)(function(){return function(){return _("")}},[]);var ea=(0,N.useCallback)(function(e){var t=e.formattedAssets,n=e.gridItems,i=e.isCopyToCollection,o=e.mappedAssetType,r=e.redirectToCollectionDetailsPage,a=e.pageSection,l=e.listId;_(o),O(t),R(a),j(l),i&&I(!0),n&&x(n),r&&ee({shouldHandleRedirect:!0,redirectToCollectionDetailsPage:r}),s(!0)},[]);return(0,N.useEffect)(function(){f({showAddToCollectionModal:ea,isLoggedInUser:L})},[L,ea]),{addToCollectionViewsProps:(0,N.useMemo)(function(){return{assets:P,pageSection:E,assetType:Z,collectionId:eo,collectionTitle:A,gridItems:D,isDialogActive:i,isSnackBarOpen:v,onAddToCollections:function(e){var t=e.id,n=e.title,i=e.verificationCode,o=e.groupedOptions,r=e.pageSection;return w(n),s(!1),C(!0),en({assetType:Z,assets:P,gridItems:D,groupedOptions:o,id:t,title:n,verificationCode:i,pageSection:r||E,listId:J})},onAlertSnackbarClose:function(){return C(!1)},redirectToCDPAction:K,setIsDialogActive:s,showCopyToModalTitle:h,status:ei,verificationCode:es}},[P,D,en,J,E,Z,eo,A,i,v,K,h,ei,es]),addToCollectionViewsHandler:(0,N.useCallback)(function(e){var t=e.assets,n=e.gridItems,i=e.isCopyToCollection,o=e.redirectToCollectionDetailsPage,s=e.pageSection,r=e.listId,a=e.openModal;if(L){er(!0);var l=[].concat(t);ea({formattedAssets:l,gridItems:n,isCopyToCollection:void 0!==i&&i,mappedAssetType:(0,c.A8)(l[0]),redirectToCollectionDetailsPage:o,pageSection:s,listId:r})}else void 0!==a&&a&&!Y?(t&&window.sessionStorage.setItem(d,JSON.stringify(t)),n&&window.sessionStorage.setItem(u,JSON.stringify(n)),W()):p({assets:t,gridItems:n,signUpPath:G})},[W,L,Y,ea,G,er]),AddToCollectionViews:$,isModalOpen:z,handleCloseModal:F}}},94340:function(e,t,n){n.d(t,{o:function(){return r}});var i=n(87394),o=n(40233),s=n(2784),r=function(){var e=(0,i.Z)((0,s.useState)(!1),2),t=e[0],n=e[1],r=(0,o.d)();return{isModalOpen:t,handleOpenModal:function(){r({actionName:"convert - signup modal opened"}),n(!0)},handleCloseModal:function(){n(!1)}}}},18027:function(e,t,n){n.d(t,{y:function(){return i}});var i=function(e){return[e.subPage,e.pageType].join("-")}},12787:function(e,t,n){n.d(t,{J:function(){return a}});var i=n(29292),o=n(776),s=n(2784),r=n(68533),a=function(){var e=(0,o.yh)().analytics,t=(0,r.Y)().getSearchContext;return(0,s.useCallback)(function(n){var o=n.collectionId,s=n.collectionName,r=n.gridItems,a=n.assets,l=n.pageSection,c=n.listId;e.productAddedToWishlist({products:a.map(function(e){return(0,i.bR)({asset:e,getSearchContext:t,gridItems:r,pageSection:l})}),wishlist_id:o,wishlist_name:s,list_id:null!=c?c:""})},[e,t])}},47875:function(e,t,n){n.d(t,{L:function(){return a}});var i=n(50930),o=n(68445),s=n(5632),r=n(2784),a=function(){var e=(0,s.useRouter)();return(0,r.useCallback)(function(t){var n=t.assetType,s=t.collectionId,r=t.verificationCode,a=(0,o.B)({assetType:n,id:s,verificationCode:r});e.push.apply(e,(0,i.Z)(a))},[e])}},52494:function(e,t,n){n.d(t,{w:function(){return u}});var i=n(98788),o=n(87394),s=n(5163),r=n(81740),a=n(44699),l=n(32456),c=n(49670),d=n(2784),u=function(){var e,t=(0,o.Z)((0,d.useState)({status:"",error:void 0}),2),n=t[0],u=t[1],p=(0,d.useCallback)((e=(0,i.Z)(function(e){var t,n,i,o,d;return(0,s.__generator)(this,function(s){switch(s.label){case 0:t=e.collection,n=e.mediaItem,i=(0,r.df)({urlParams:{id:t.id}}).formattedUrl,o={data:{id:t.id,relationships:{"cover-item":{data:{id:"".concat(n.id),type:l.A8}}},type:l.Ul}},s.label=1;case 1:return s.trys.push([1,3,,4]),u({status:a.MR,error:void 0}),[4,c.uS.patch(i,o)];case 2:return s.sent(),[3,4];case 3:return d=s.sent(),u({status:a.cM,error:d}),[3,4];case 4:return[2]}})}),function(t){return e.apply(this,arguments)}),[]);return{status:n,setStatus:u,setAsCover:p}}}}]);
//# sourceMappingURL=32754-8cdb25ac718eed7b.js.map